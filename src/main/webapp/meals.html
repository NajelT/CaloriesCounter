<div class="panel" ng-controller='MealsCtrl as editMeal'>
	<nav class="navbar navbar-default">
		<div class="container-fluid">
			<div class="navbar-header">
				<form class="navbar-form navbar-right" role="search">
					<div class="row">
						<div class="col-lg-3">
							<div class="input-group">
								<span class="input-group-addon">from</span> <input type="date" class="form-control" placeholder="from" ng-model="editMeal.filters.dateFrom">
							</div>
						</div>
						<div class="col-lg-3">
							<div class="input-group">
								<span class="input-group-addon">to</span> <input type="date" class="form-control" placeholder="to" ng-model="editMeal.filters.dateTo">
							</div>
						</div>
						<div class="col-lg-2">
							<div class="input-group">
								<span class="input-group-addon">from</span> <input type="time" class="form-control" placeholder="from" ng-model="editMeal.filters.timeFrom">
							</div>
						</div>
						<div class="col-lg-2">
							<div class="input-group">
								<span class="input-group-addon">to</span> <input type="time" class="form-control" placeholder="to" ng-model="editMeal.filters.timeTo">
							</div>
						</div>
						<div class="col-lg-1">
							<div class="input-group-btn">
								<button type="button" class="btn btn-default {active:editMeal.filters.active}" aria-label="Search" ng-click="editMeal.filter()">
									<span class="glyphicon glyphicon-filter"></span>
								</button>
							</div>
						</div>
				</form>
			</div>
		</div>
	</nav>
	<div><form name="formMeal" ng-submit="editMeal.save()">
		<ul class="list-group">
            <li class="list-group-item" ng-repeat="meal in editMeal.list">
            	<ul class="nav nav-tabs nav-justified" ng-hide="editMeal.isEditMode(meal)">
              		<li>
              			<span class="label label-default">{{meal.date| date:'medium'}}</span>
              			<span ng-class="editMeal.isAboveTheLimit(meal.date) ? 'label label-danger' : 'label label-success'">{{meal.calories}} calories</span>
              			{{meal.description}}
              		</li>
              		<li> 
						<div align="right"">
		              	<a href ng-click="editMeal.setEditMode(meal)"><span style="font-size:1.5em;" class="glyphicon glyphicon-pencil" aria-hidden="true"></span></a>
		             	<a href ng-click="editMeal.removeMeal(meal)"><span style="font-size:1.5em;" class="glyphicon glyphicon-minus-sign" aria-hidden="true"></span></a>
		             	</div>
		            </li>
		         </ul>
				<ul class="nav nav-tabs nav-justified" ng-show="editMeal.isEditMode(meal)">
					<li><fieldset class="form-group">
						<input type="date" class="form-control" ng-model="meal.date" required/>
					</fieldset></li>
					<li><fieldset class="form-group">
						<input type="time" class="form-control" ng-model="meal.date" required/>
					</fieldset></li>
					<li><fieldset class="form-group">
						<input type="text" class="form-control" placeholder="description" ng-model="meal.description" required/>
					</fieldset></li>
					<li><fieldset class="form-group">
						<input type="number" class="form-control" placeholder="calories" ng-model="meal.calories" required/>
					</fieldset></li>
					<li>
						<div align="right">
						<a href ng-click="editMeal.updateMeal(meal)"><span style="font-size:1.5em;" class="glyphicon glyphicon-ok-sign" aria-hidden="true"></span></a>
						<a href ng-click="editMeal.setEditMode(false)"><span style="font-size:1.5em;" class="glyphicon glyphicon-remove-sign" aria-hidden="true"></span></a>
						</div>
					</li>
				 </ul>		         
			</li>
           
           <li class="list-group-item" ng-show="editMeal.isEditMode({})">
				<ul class="nav nav-tabs nav-justified">
					<li><fieldset class="form-group">
						<input type="date" class="form-control" ng-model="editMeal.editedMeal.date" required/>
					</fieldset></li>
					<li><fieldset class="form-group">
						<input type="time" class="form-control" ng-model="editMeal.editedMeal.date" required/>
					</fieldlit></li>
					<li><fieldset class="form-group">
						<input type="text" class="form-control" ng-model="editMeal.editedMeal.description" placeholder="description" required/>
					</fieldset></li>
					<li><fieldset class="form-group">
						<input type="number" class="form-control" ng-model="editMeal.editedMeal.calories" placeholder="calories" required/>
					</fieldset></li>
					<li>
						<div align="right">
						<a href ng-click="editMeal.addMeal()"><span style="font-size:1.5em;" class="glyphicon glyphicon-ok-sign" aria-hidden="true"></span></a>
						<a href ng-click="editMeal.setEditMode(false)"><span style="font-size:1.5em;" class="glyphicon glyphicon-remove-sign" aria-hidden="true"></span></a>
						</div>
					</li>
				 </ul>
			 </li>
			<li class="list-group-item" ng-hide="editMeal.isEditMode({})">
				<div align="right" >
					<a href ng-click="editMeal.setEditMode({})"><span style="font-size:1.5em;" class="glyphicon glyphicon-plus-sign" aria-hidden="true"></span></a>
				</div>
			</li>
		</ul>
    	<div ng-messages="editMeal.$messages" ng-messages-include="messages.html"></div>
    </form>
</div>	
