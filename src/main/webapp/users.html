<div ng-controller="UsersCtrl as users">
	<form>
		<ul class="list-group">
			<li class="list-group-item" ng-repeat="user in users.list">
				<ul class="nav nav-tabs nav-justified" ng-hide="users.isEditMode(user)">
					<li>
						<span class="label label-default">{{user.profile}}</span>
						<b>{{user.name}}</b> ({{user.email}})
					</li>
					<li> 
						<div align="right"">
		              	<a href ng-click="users.setEditMode(user)"><span style="font-size:1.5em;" class="glyphicon glyphicon-pencil" aria-hidden="true"></span></a>
		              	<a href ng-click="users.listMeals(user)" ng-show="section.tabIsVisible('meals')"><span style="font-size:1.5em;" class="glyphicon glyphicon-scale" aria-hidden="true"></span></a>
		             	<a href ng-click="users.removeUser(user)"><span style="font-size:1.5em;" class="glyphicon glyphicon-minus-sign" aria-hidden="true"></span></a>
		             	</div>
		            </li>
		         </ul>
				 <ul class="nav nav-tabs nav-justified" ng-show="users.isEditMode(user)">
					<li><input type="text" class="form-control" ng-model="user.name" placeholder="name" required/></li>
					<li><input type="email" class="form-control" ng-model="user.email" placeholder="e-mail" required/></li>
					<li><input type="password" class="form-control" ng-model="user.password" placeholder="new password" required/></li>
					<li><input type="password" class="form-control" ng-model="user.repeatedPassword" placeholder="repeat password" required/></li>
					<li>
						<select class="form-control" ng-model="user.profile"  placeholder="profile" required>
						    <option value="USER">USER</option>
						    <option value="USER_MANAGER">USER_MANAGER</option>
						    <option value="ADMIN_MANAGER" ng-selected="'ADMIN_MANAGER'.equals(user.profile)">ADMIN_MANAGER</option>
						</select>
					</li>
					<li>
					<div align="right">
					<a href ng-click="users.updateUser(user)"><span style="font-size:1.5em;" class="glyphicon glyphicon-ok-sign" aria-hidden="true"></span></a>
					<a href ng-click="users.setEditMode(false)"><span style="font-size:1.5em;" class="glyphicon glyphicon-remove-sign" aria-hidden="true"></span></a>
					</div>
					</li>
				</ul>
			</li>
			<li class="list-group-item" ng-show="users.isEditMode({})">
				<ul class="nav nav-tabs nav-justified">
					<li><input type="text" class="form-control" ng-model="users.newUser.name" placeholder="name" required/></li>
					<li><input type="email" class="form-control" ng-model="users.newUser.email" placeholder="e-mail" required/></li>
					<li><input type="password" class="form-control" ng-model="users.newUser.password" placeholder="new password" required/></li>
					<li><input type="password" class="form-control" ng-model="users.newUser.repeatedPassword" placeholder="repeat password" required/></li>
					<li>
						<select class="form-control" ng-model="users.newUser.profile"  placeholder="profile" required>
						    <option value="user">USER</option>
						    <option value="user_manager">USER_MANAGER</option>
						    <option value="admin_manager">ADMIN_MANAGER</option>
						</select>
					</li>
					<li>
					<div align="right">
					<a href ng-click="users.addUser()"><span style="font-size:1.5em;" class="glyphicon glyphicon-ok-sign" aria-hidden="true"></span></a>
					<a href ng-click="users.setEditMode(false)"><span style="font-size:1.5em;" class="glyphicon glyphicon-remove-sign" aria-hidden="true"></span></a>
					</div>
					</li>
				</ul>
			</li>
			<li class="list-group-item" ng-hide="users.isEditMode({})">
				<div align="right" >
					<a href ng-click="users.setEditMode(true)"><span style="font-size:1.5em;" class="glyphicon glyphicon-plus-sign" aria-hidden="true"></span></a>
				</div>
			</li>
		</ul>
		<div ng-messages="users.$messages" ng-messages-include="messages.html"></div>
	</form>	
</div>